#include <stdio.h>  
#include <stdlib.h>
#include <string.h>

FILE *fin;
int time_limit[15];

typedef struct customer
{
    char name[20];
    int sum;
    int time;
    struct customer *next;
} CustomerT;

CustomerT *tail, *now;

typedef struct sent
{
    CustomerT *head;
    //int time_limit[5];
    int ctime;
    int tsum;
} SentT;
SentT sentinel;

int add_last()
{
    if(sentinel.head==NULL)
    {
        sentinel.head=(CustomerT*)malloc(sizeof(CustomerT));
        fscanf(fin, "%s %d %d", sentinel.head->name, &sentinel.head->sum, &sentinel.head->time);
        sentinel.head->next=NULL;
        tail=sentinel.head;
    }
    else
    {
        CustomerT *current;
        current=(CustomerT*)malloc(sizeof(CustomerT));
        fscanf(fin, "%s %d %d", current->name, &current->sum, &current->time);
        if(current->time==0)return 0;
        current->next=NULL;
        tail->next=current;
        tail=current;
    }
    add_last();
    return 0;
}

void print()
{
    CustomerT *now;
    now=sentinel.head;
    while(now!=NULL)
    {
        printf("%d ", now->sum);
        now=now->next;
    }
    printf("\n");
}


void calculate(int i)
{
    if(now->next!=NULL)
        while(sentinel.ctime+now->time <= time_limit[i])
        {
            sentinel.ctime+=now->time;
            sentinel.tsum+=now->sum;
            if(now->next==NULL)break;
            now=now->next;
        }
    printf("%d \n", sentinel.tsum);
}

int main()
{
    char s[60];
    int n=0, i, cn;
    fin=fopen("input.dat", "r");
    fgets(s, 59, fin);
    char *ps=strtok(s, " ");
    while(ps!=NULL)
    {
        sscanf(ps, "%d", &time_limit[n]);
        n++;
        ps=strtok(NULL, " ");
    }
    n--;
    fscanf(fin, "%d", &cn);
    for(i=1; i<=n; i++)add_last();
    print();
    //for(i=0; i<=n; i++)printf("%d ", time_limit[i]);
    //printf("%d %d \n", sentinel.ctime, sentinel.tsum);
    now=sentinel.head;
    //calculate(5);
    for(i=0; i<=n; i++)calculate(i);
    fclose(fin);
    return 0;
}
